// Hand Tracking Toggle Button
.hand-tracking-toggle
    position fixed
    top 20px
    left 20px
    z-index 100
    width 48px
    height 48px
    padding 0
    border none
    border-radius 14px
    background rgba(17, 17, 26, 0.8)
    backdrop-filter blur(12px)
    border 1px solid rgba(255, 255, 255, 0.1)
    cursor pointer
    transition all 0.3s cubic-bezier(0.4, 0, 0.2, 1)
    box-shadow 0 4px 12px rgba(0, 0, 0, 0.2)
    
    &:hover
        background rgba(17, 17, 26, 0.95)
        transform translateY(-2px)
        box-shadow 0 6px 16px rgba(0, 0, 0, 0.3)
    
    &.is-active
        background linear-gradient(135deg, rgba(0, 255, 136, 0.25), rgba(0, 200, 255, 0.25))
        border-color rgba(0, 255, 136, 0.4)
        box-shadow 0 0 24px rgba(0, 255, 136, 0.3), 0 4px 12px rgba(0, 0, 0, 0.3)
        animation pulse-glow 2s ease-in-out infinite
        
        .hand-icon
            color #00ff88
            filter drop-shadow(0 0 8px rgba(0, 255, 136, 0.8))
    
    .button-inner
        display flex
        align-items center
        justify-content center
        width 100%
        height 100%
    
    .icon-container
        display flex
        align-items center
        justify-content center
    
    .hand-icon
        width 26px
        height 26px
        color rgba(255, 255, 255, 0.9)
        transition all 0.3s ease

@keyframes pulse-glow
    0%, 100%
        box-shadow 0 0 24px rgba(0, 255, 136, 0.3), 0 4px 12px rgba(0, 0, 0, 0.3)
    50%
        box-shadow 0 0 32px rgba(0, 255, 136, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3)

// Hand Tracking Camera Card
.hand-tracking-card
    position fixed
    top 80px
    left 20px
    z-index 99
    width 320px
    border-radius 20px
    background rgba(17, 17, 26, 0.92)
    backdrop-filter blur(24px)
    border 1px solid rgba(255, 255, 255, 0.1)
    box-shadow 0 12px 40px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1)
    overflow hidden
    opacity 0
    visibility hidden
    transform translateY(-10px) scale(0.95)
    transition all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
    pointer-events none
    
    &.is-visible
        opacity 1
        visibility visible
        transform translateY(0) scale(1)
        pointer-events auto
    
    .card-header
        display flex
        align-items center
        justify-content space-between
        padding 14px 18px
        border-bottom 1px solid rgba(255, 255, 255, 0.1)
        background rgba(0, 0, 0, 0.2)
        
        .header-left
            display flex
            align-items center
            gap 10px
            
            .header-icon
                width 18px
                height 18px
                color #00ff88
                opacity 0.8
        
        .title
            font-size 15px
            font-weight 600
            color rgba(255, 255, 255, 0.95)
            letter-spacing 0.3px
        
        .close-btn
            display flex
            align-items center
            justify-content center
            width 28px
            height 28px
            padding 0
            border none
            border-radius 8px
            background rgba(255, 255, 255, 0.08)
            color rgba(255, 255, 255, 0.7)
            cursor pointer
            transition all 0.2s ease
            
            &:hover
                background rgba(255, 68, 136, 0.25)
                color #ff4488
                transform scale(1.1)
    
    .card-body
        position relative
        width 100%
        aspect-ratio 4/3
        background linear-gradient(135deg, #0a0a0f, #151520)
        overflow hidden
        
        video
            position absolute
            inset 0
            width 100%
            height 100%
            object-fit cover
            transform scaleX(-1)
        
        canvas
            position absolute
            inset 0
            width 100%
            height 100%
            transform scaleX(-1)
            pointer-events none
        
        .detection-overlay
            position absolute
            inset 0
            pointer-events none
            opacity 0
            transition opacity 0.3s ease
            
            .detection-pulse
                position absolute
                inset -2px
                border 2px solid #00ff88
                border-radius 12px
                opacity 0
                animation detection-pulse 2s ease-in-out infinite
        
        &.is-tracking .detection-overlay
            opacity 1
    
    .card-controls
        padding 14px 18px
        border-top 1px solid rgba(255, 255, 255, 0.08)
        background rgba(0, 0, 0, 0.15)
        display flex
        flex-direction column
        gap 12px
        
        .control-group
            display flex
            flex-direction column
            gap 6px
            
            &.control-group-inline
                flex-direction row
                justify-content space-around
                gap 16px
            
            .control-label
                display flex
                align-items center
                gap 6px
                font-size 11px
                font-weight 500
                color rgba(255, 255, 255, 0.6)
                text-transform uppercase
                letter-spacing 0.5px
                
                .control-icon
                    width 12px
                    height 12px
                    color rgba(255, 255, 255, 0.5)
            
            .control-bar
                position relative
                height 6px
                background rgba(255, 255, 255, 0.1)
                border-radius 3px
                overflow hidden
                
                &.steering-bar
                    display flex
                    align-items center
                    justify-content center
                    
                    .control-center
                        position absolute
                        left 50%
                        top 0
                        bottom 0
                        width 2px
                        background rgba(255, 255, 255, 0.3)
                        transform translateX(-50%)
                        z-index 1
                
                .control-fill
                    position absolute
                    top 0
                    bottom 0
                    height 100%
                    border-radius 3px
                    transition width 0.1s linear, left 0.1s linear, right 0.1s linear
                    
                    &[data-direction="forward"]
                        left 50%
                        background linear-gradient(90deg, #00ff88, #00c8ff)
                        transform-origin left center
                        width 0%
                    
                    &[data-direction="reverse"]
                        right 50%
                        background linear-gradient(270deg, #ff6b6b, #ff8e53)
                        transform-origin right center
                        width 0%
                    
                    &[data-direction="left"]
                        left 50%
                        background linear-gradient(270deg, #ff6b6b, #ff8e53)
                        transform-origin left center
                        width 0%
                        transform translateX(-100%)
                    
                    &[data-direction="right"]
                        left 50%
                        background linear-gradient(90deg, #00ff88, #00c8ff)
                        transform-origin left center
                        width 0%
            
            .control-indicator
                display flex
                flex-direction column
                align-items center
                gap 4px
                
                .indicator-icon
                    width 32px
                    height 32px
                    display flex
                    align-items center
                    justify-content center
                    border-radius 8px
                    background rgba(255, 255, 255, 0.08)
                    color rgba(255, 255, 255, 0.4)
                    transition all 0.3s ease
                    
                    svg
                        width 18px
                        height 18px
                    
                    &.is-active
                        background rgba(255, 68, 136, 0.25)
                        color #ff4488
                        box-shadow 0 0 12px rgba(255, 68, 136, 0.4)
                        transform scale(1.1)
                
                .indicator-label
                    font-size 10px
                    font-weight 500
                    color rgba(255, 255, 255, 0.5)
                    text-transform uppercase
                    letter-spacing 0.5px
    
    .card-footer
        padding 12px 18px
        border-top 1px solid rgba(255, 255, 255, 0.08)
        background rgba(0, 0, 0, 0.2)
        
        .status-container
            display flex
            align-items center
            justify-content center
            gap 8px
            
            .status-indicator
                width 8px
                height 8px
                border-radius 50%
                background rgba(255, 255, 255, 0.3)
                transition all 0.3s ease
                animation status-pulse 2s ease-in-out infinite
            
            .status
                font-size 12px
                font-weight 500
                color rgba(255, 255, 255, 0.6)
                transition color 0.3s ease
    
    .controls-hint
        padding 12px 18px
        border-top 1px solid rgba(255, 255, 255, 0.05)
        background rgba(0, 0, 0, 0.1)
        display grid
        grid-template-columns 1fr 1fr
        gap 8px
        
        .hint-item
            display flex
            align-items center
            gap 6px
            padding 6px 8px
            border-radius 6px
            background rgba(255, 255, 255, 0.03)
            transition background 0.2s ease
            
            &:hover
                background rgba(255, 255, 255, 0.06)
            
            .hint-icon
                font-size 14px
                line-height 1
                opacity 0.8
            
            .hint-text
                font-size 10px
                color rgba(255, 255, 255, 0.5)
                line-height 1.4

@keyframes detection-pulse
    0%
        opacity 0
        transform scale(1)
    50%
        opacity 0.6
        transform scale(1.02)
    100%
        opacity 0
        transform scale(1)

@keyframes status-pulse
    0%, 100%
        opacity 0.3
        transform scale(1)
    50%
        opacity 1
        transform scale(1.2)

// Status states
.hand-tracking-card
    &[data-status="tracking"]
        .card-footer
            .status-indicator
                background #00ff88
                box-shadow 0 0 8px rgba(0, 255, 136, 0.6)
            
            .status
                color #00ff88
        
        .card-body .detection-overlay
            opacity 1
    
    &[data-status="ready"]
        .card-footer
            .status-indicator
                background #ffaa00
                box-shadow 0 0 8px rgba(255, 170, 0, 0.6)
            
            .status
                color #ffaa00
    
    &[data-status="error"]
        .card-footer
            .status-indicator
                background #ff4466
                box-shadow 0 0 8px rgba(255, 68, 102, 0.6)
            
            .status
                color #ff4466
    
    &[data-status="initializing"]
        .card-footer
            .status-indicator
                background #888
                animation status-pulse 1s ease-in-out infinite

// Responsive - hide on very small screens
@media (max-width: 480px)
    .hand-tracking-toggle
        top 10px
        left 10px
        width 42px
        height 42px
    
    .hand-tracking-card
        top 60px
        left 10px
        width 280px
        
        .controls-hint
            grid-template-columns 1fr

// Hide in touch mode (it requires a camera which is better used full-screen on mobile)
html.is-mode-touch
    .hand-tracking-toggle,
    .hand-tracking-card
        display none
